# 程序参数

本节对各模块参数分成布尔、必须、半必须、可选四类进行详细介绍。

* 布尔参数在配置文件中分为赋值和未赋值两种，在命令行中分为指明和未指明两种。 当为赋值或指明时，程序将执行参数对应的功能；反之，程序不执行相应功能。
* 必须参数若未赋值，所属模块被调用时会报错。
* 半必须参数若未赋值，调用模块下特定功能时会报错。
* 可选参数若未被赋值，特定功能无法使用，但不会报错。

除非模块参数外，其他参数仅当所属模块被调用时才会使用。<br/><br/>

## 非模块参数

下面参数将在各模块中使用：<br/>
`-c`, `--config_path`：配置文件路径，文件中指明程序所需调用的各参数的值。 当文件中参数与命令行被调参数重复时，程序将以命令行值为标准。<br/>
`-o`, `--output-folder`：程序运行结果的输出路径。默认为当前工作路径。<br/><br/>

## 基因型数据预处理模块参数

* **布尔参数**

`-pg`，`--preprocessed-geno`：调用预处理基因型数据模块，可选值 [all, filter]。其中all表示程序将调用完整的预处理模块， 包括对统计与可视化数据基本情况，根据缺失率、MAF筛除不符合要求的样本个体及snp位点，根据高频基因型填补snp的缺失数据， 根据r^2去除冗余snp，根据snp编号或样本编号提取特定样本的特定基因型数据功能；而filter表示程序将调用部分的预处理模块， 仅包括根据snp编号或样本编号提取特定样本的特定基因型数据功能。<br/>
`--recode`：基因型数据文件重编码，将编码方式由碱基编码转化为加性编码。

* **必须参数**

`--fileprefix`：基因型数据文件名前缀。<br/>
`--fileformat`：基因型数据文件格式，可选值 [ped, bed, vcf, bcf]。

* **可选参数**

`--remove-sampleid-path`：待删除样本编号文件路径，格式为以空格或制表符作为分隔符的两列样本编号。 其中第一列为 familyID，第二列为 within-familyID。程序将根据样本编号删除基因型文件中对应样本数据。<br/>
`--keep-sampleid-path`：待提取样本编号文件路径，格式为以空格或制表符作为分隔符的两列样本编号。 其中第一列为 familyID，第二列为 within-familyID。程序将根据样本编号提取基因型文件中对应样本数据。<br/>
`--extract-snpid-path`：待提取snp编号文件路径，格式为一列snp编号。程序将根据snp编号提取基因型文件中对应snp数据。<br/>
`--exclude-snpid-path`：待删除snp编号文件路径，格式为一列snp编号。程序将根据snp编号删除基因型文件中对应snp数据。<br/>
`--snpmaxmiss`：snp最大缺失率。筛除缺失率超过阈值的snp。默认值 0.05<br/>
`--samplemaxmiss`：样本最大缺失率。筛除缺失率超过阈值的样本。默认值 0.05<br/>
`--maf-max`：最小等位基因频率。筛除最小等位基因频率小于阈值的snp。默认值 0.01<br/>
`--r2-cutoff`：与 plink 中`--indep-pairwise`参数等价。默认值 0.8<br/><br/>

## 表型数据预处理模块参数

* **布尔参数**

`-pp`，`--preprocessed-phe`：调用预处理表型数据模块。<br/>
`--phe-norm`：调用表型数据归一化函数。<br/>
`--phe-plot`：调用表型数据可视化函数。<br/>
`--phefile-header`：表型数据文件包含表头。<br/>
`--ppgroupfile-header`：组编号数据文件文件包含表头。

* **必须参数**

`--phefile-path`：表型数据文件路径。

* **半必须参数**

`--ppexsampleid-path`：待提取样本编号文件路径，文件内容仅为一列样本编号。<br/>
`--ppgroupfile-path`：组编号数据文件路径。<br/>
`--ppgroupfile-sep`：组编号数据文件分隔符。默认值为 ','<br/>
`--ppgroupid-column`：组编号数据文件中储存组编号信息的列索引。该参数仅在 ppgroupfile 列数大于2时使用。默认值为 2<br/>
`--num2wordfile-path`：整数与表型对应转化表文件路径。该参数仅在`--phe-recode=num2word`时使用。<br/>

* **可选参数**

`--phefile-sep`：表型数据文件分隔符。默认值为 ','<br/>
`--phe-column`：表型数据文件中储存表型信息的列索引，此参数仅当表型文件列数大于2时被调用。默认值 2<br/>
`--phe-recode`：调用表型数据重编码函数，可选值 [word2num, num2word]。其中 word2num 表示将表型数据重编码为连续非负整数形式， num2word 表示将连续非负整数形式重编码为表型数据（需要提供整数与表型对应转化表）。当执行分类任务时，Lightgbm 仅接受带有示例标签[0，N） 的连续整数。 如果训练样本来自5组，则需要 [0、1、2、3、4] 作为5组的标签，但这通常与实际的组命名不匹配。使用此参数， 程序可以实现样本标签和[0，N）个连续整数之间的可逆转换。为下游分类任务提供兼容的表型数据。<br/>
`--norm-mode`：归一化算法，可选值 [0-1, max-min, z-score]。默认值 z-score<br/><br/>

## 群体结构分析模块参数

* **布尔参数**

`-s`，`--structure`：调用群体结构分析模块。<br/>
`--structure-plot`：调用群体结构绘图函数。总计输出2或3幅散点图展示降维与聚类结果。<br/>
`--sgroupfile-header`：组编号数据文件文件包含表头。

* **必须参数**

`--genofile-path`：基因型数据文件路径，常为预处理后结果作为输入。

* **半必须参数**

`--n-clusters`：形成的簇数以及生成的质心数。该参数仅在`--cluster-mode=kmeans`时使用。<br/>
`--sgroupfile-path`：组编号数据文件路径。<br/>
`--sgroupfile-sep`：组编号数据文件分隔符。默认值 ','<br/>
`--sgroupfile-column`：组编号数据文件中储存组编号信息的列索引。该参数仅在`--sgroupfile-path`文件列数大于2时使用。

* **可选参数**

`--redim-mode`：降维算法，可选值 [tsne, pca]。默认值 pca<br/>
`--pca-explained-var`：参数值为大于1的整数或0-1间的小数。当参数值为整数时，表示pca降维后数据的维度； 当参数值为小数时，表示pca降维后数据可解释的变异量。默认值为 0.95。该参数仅在`--redim-mode=pca`时使用<br/>
`--window-size`：降维中滑窗大小。由于 t-SNE 降维算法计算速度随维度的增加而大幅降低，程序通过滑窗的方式对数据进行初步降维。 默认值为 20。该参数仅在`--redim-mode=tsne`时使用。<br/>
`--tsne-dim`：t-SNE 算法降维后数据的维度。默认值为 2。该参数仅在`--redim-mode=tsne`时使用。<br/>
`--cluster-mode`：降维算法，可选值 [tsne, pca]。默认值 kmeans<br/>
`--optics-min-samples`：参数值为大于1的整数或0-1间的小数。当参数值为整数时，表示构成核心点所需的最小样本数； 当参数值为小数时，表示构成核心点所需的最小样本数占总样本数的比例。该参数仅在`--cluster-mode=optics`时使用。默认值为 0.025<br/>
`--optics-xi`：聚集成类所需的可达距离梯度的最小值。该参数仅在`--cluster-mode=optics`时使用。默认值为 0.05<br/>
`--optics-min-cluster-size`：参数值为大于1的整数或0-1间的小数。当参数值为整数时，表示聚集成类所需的最小样本数；当参数值为小数时，表示聚集成类所需的最小样本数占总样本数的比例。该参数仅在`--cluster-mode=optics`时使用。默认值为 0.03<br/><br/>

## 特征选择与表型预测模块参数

* **布尔参数**

`-e`，`--engine`：调用特征选择与表型预测模块。<br/>
`-t`，`--train`：调用训练模型功能。<br/>
`-cv`：调用交叉验证功能。<br/>
`-p`，`--predict`：调用表型预测功能。<br/>
`-sf`，`--select-feature`：调用特征选择功能。<br/>
`--bygain-boxplot`：绘制随snp加入模型误差不断变化的箱线图。该参数在`-sf`时使用。

* **半必须参数**

`--traingeno`：训练集样本基因型数据文件路径。文件分隔符为','，第一行为snp编号信息，第一列为样本编号信息。 该参数在`-t`或`-cv`被指明时使用。<br/>
`--trainphe`：训练集样本表型数据文件路径。文件分隔符为','，包含表头，第一列为样本编号信息。该参数在`-t`或`-cv`被指明时使用。<br/>
`--testgeno`：测试集样本基因型数据文件路径。文件分隔符为','，第一行为snp编号信息，第一列为样本编号信息。该参数在`-p`被指明时使用。<br/>
`--modelfile-path`：lightgbm 模型文件路径，程序通过此模型完成对测试集样本的表型预测。该参数在`-p`被指明时使用。

* **可选参数**

`--validgeno`：验证集样本基因型数据文件路径。文件分隔符为','，第一行为snp编号信息，第一列为样本编号信息。该参数在`-t`被指明时使用。<br/>
`--validphe`：验证集样本样本编号信息文件路径。文件分隔符为','，包含表头，第一列为样本编号信息。该参数在`-t`被指明时使用。<br/>
`--init-model-path`：起始模型文件路径，lightgbm 算法会在此模型基础上继续训练。常用于大数据的分批训练。 该参数在`-t`或`-cv`被指明时使用。<br/>
`--min-detal`：每次训练对模型精确度提升的最小百分值。程序会返回提升的精确度小于此阈值时模型的训练次数与此时模型交叉验证的精确度。 当`objective=regression`时，精确度为预测结果与真实值间 mse 的均值。该参数在`-cv`被指明时使用。默认值 0.5<br/>
`--cv-times`：交叉验证的重复次数。该参数在`-sf`被指明时使用。默认值 5<br/>
`--cv-nfold`：每次交叉验证的折叠数。该参数在`-cv`被指明时使用。默认值 5<br/>
`--gain-min`：交算每个snp在模型中的总增益，将最大增益与`--gain-min`的乘积作为阈值。当snp在模型中的总增益小于阈值时， 此snp不会被选择。该参数在`-sf`且`--bygain-boxplot`被指明时使用。默认值 0.05<br/>
`--colorbar-max`：各snp在各树中的最大增益值与`--colorbar-max`的乘积将作为热图中 colorbar 的最大值。 该参数在`-sf`被指明时使用。默认值 0.6<br/>

## lightgbm参数

`--learning-rate`：模型的学习率。默认值为0.1<br/>
`--num-leaves`：每棵决策树的最大叶片数。默认值为10<br/>
`--num-threads`：可供核心模块运算调用的 CPU 线程数。默认值为0，0表示 OpenMP 中的默认线程数。<br/>
`--min-data-in-leaf`：每个叶片中最小样本数。默认值为1<br/>
`--objective`：模型训练的目的类型。默认值为'regression'<br/>
`--device-type`：模型运算所调用的设备类型，可选值 ['cpu', 'gpu']。默认值为'cpu'<br/>
`--max-depth`：决策树最大深度。若值<=0表示没有最大深度限制。默认值为-1<br/>
`--feature-fraction`：训练模型所用到的特征数占总特征数的比例。默认值为1<br/>
`--verbosity`：控制模型训练过程中信息的输出复杂度。< 0: Fatal, = 0: Error (Warning), = 1: Info, > 1: Debug。默认值为0<br/>
`--num-class`：训练集中样本的类别数。该参数仅在多分类任务时被调用，即`--objective：multiclass`。默认值为1<br/>
`--num-boost-round`：模型的训练（迭代）次数。默认值为100<br/>
`--early-stopping-rounds`：此参数仅在`-cv`或`-t`且有验证集的情况下别调用。每经过N轮（N为用户定义此参数的值）训练后， 程序将计算模型在验证集上的预测精度，若预测精度不再提升，模型将立即停止训练。该参数可以用于防止模型训练过拟合。默认值为20<br/>
`--verbose-eval`：此参数仅在`-cv`或`-t`且有验证集的情况下别调用。每经过N轮（N为用户定义此参数的值）训练后， 程序将计算模型在验证集上的预测精度并输出。默认值为10
